use Mix.Config

# We don't run a server during test. If one is required, you can enable the server option below.
config :identificator, Identificator.Endpoint,
  http: [port: 4001],
  server: false

# Print only warnings and errors during test
config :logger, level: :warn

# Configure your database
config :identificator, ecto_repos: [Identificator.Repo]
config :identificator, Identificator.Repo,
  adapter: Ecto.Adapters.Postgres,
  username: "postgres",
  password: "",
  database: "identificator_test",
  hostname: "localhost",
  pool: Ecto.Adapters.SQL.Sandbox

config :identificator, Identificator.Mailer,
  adapter: Swoosh.Adapters.Test

config :guardian, Guardian,
  allowed_algos: ["RS512"], # optional
  verify_module: Guardian.JWT,  # optional
  issuer: "identificator",
  ttl: { 30, :days },
  verify_issuer: true, # optional
  secret_key: fn ->
    "{\"d\":\"zMJCJa75760I6R3DIztf_6R0HppvO6cjzak3KMbz8qk_taumwhy7YqkzSUjYR3mCB_nRcuNg6FACzNbzONdqBlx2s6smWU1HAmtuKXw1DgBR75qhR2m7KbT5-A6RKR_T1aspoptAGzyVS0bvh7cDhqwFudAooDdhd0Eybqi_Fx0ufkZPTLLJC-GGq0aMtPYQ-rHkFvD_CtkbuScMI2fFVyBRzPavYM5eazd6iM5PYxAmqL4NkfKNRnSfMJ0MrgrPYoF9F74t-r50kAMQ3TkWT2G9bojETzkR0ccy4p0rA7E1gt0qYA5dDq_lS-mPMEeJkS8UE2FNJHa0yxcoxTr-J6fhYJ3xYVqSiJr0yLie20qSfXhY3NNPnCJGgtQdLsLJ4iF9-7l0fe61dAq2FjNDD3Y8lGAPriou1-zQo2oU50YH9rUwOGGLumcCrjy4Da3otGfQc6QbWCWl6_KZoFsf7u6THyq94ZxhbUxSEXSJO9orOrmY7isyPWRp-hy-9oUv3zr7z1ngiY83pXj5x2j0I63T_2tf0jIvx11tHVFTcLrmbBF6zG-aRBi2_neXvcbkhBVb2A3HpSna9afPZi5q1Qb3qSPXGIItEZmNHdgsa3HvCoUmMBYkYv3ZJs1IOspqbQ5X_xZflwnVqp_oTdELZuejmVTYcd_hzaZHQxJ_3gE\",\"dp\":\"vkLBCzZXrzb_q8h71cshOdJMK9s-nWl5anDkMn-Q7OzrS3jwK2_Lacv6__btGEw5rV3IC_cxe6SOUWli7uh3ZOqHlWnTeqe0TeiF1ydNaRy50RVRwnRKX-pCPCOQhPs9OlPh51MtNmMiTynPFENrRS8xNy-BUM0Oj83XNRhBtX8nwuSOPPExxfRwvX7XVztsIussGx4wW59UnWVmTpSdVEIWoxpsTxFaEUSVM8-C44liqjlJSmByOYhlc5MHyNMEGMLp2dr5RhMW3Mr4XAlVaHoCKJvud14crZKMYG7narQNPrzhHAJVwoLf0t7sikcZEXsmHHLS6RFi3QfKhGxUzQ\",\"dq\":\"zBa9HS-nB7ZOLsZZ0hHcFy2xqNhUX5t5yJoedgJD16RcklWbnZnGGe1G-o8G0bKiLAt4Sg9OiVHX7Sh1mNhBvVVlslevB8BS7MkEOQUC2okwjtXXPDrTOn658SIlsJSmhDCvGrcGw1J2R9Kum7ASTJ1aJqlRztjUoapRRI-r78H8712KpIlbM599SQwRZ2k44T5khCLIZoXamfFLYBmU5zZidhdMaNLQt16WYqzlmvPCkje7BDjoeW6JZiLxt7gnsVAXu8hlodwsL9jLAXCIAjO517uOEzUDBknJm6pD0Vk3P7_bSqUovbbfQQQTSi6liXxS8p5pT1dd1HLipdmkkQ\",\"e\":\"AQAB\",\"kty\":\"RSA\",\"n\":\"zVA2DRohlb3rJ9IMqbMuau33XR6S2wz4X46278LywIGLbseFmZ0ZgO05CbLMfOeoxYOj7WgLU3pPM00FAzzctYNHUSmmpwZ0v_Zp_cjYnyLH2VH5PWU4Kg0Mpbp5ayqqSpJD3GxtQZnKQuo718rmvFEEGKbVIugBL3NI8gGO0gyuU04TQD5AiwopiVum_lGeDWwZGhcFz9cKaWs_BcfiKmLM2h5xRV1vdjcrrlCvqiSC0tWpNFQZCjjsyAXBP_N0zZ48Yr8pJTYEcYWsxxLQd8pn98CHNPHHQ9eo7fOlImPd3JpXWUYdUTTIRX6iKVMjAMkvkyqNxzzTEuj0BCad8QcnpdNWu2XwedAR7xb_uoK0n4UKzpppNL20oRIXewwC8R7up-dLf_axMXgWuIgtAQ5Of8mYw3UDeR7mMaktVGczuXl_11F8HG8In0pQTIC-EXBMZZxt3kVE229VOGAjsCpKgewHwtIwaWCqhyWI8RNfaZnd2ojbWeWtpAji4b5OCOUzScxY4UChyuaDHZJWSM9E07urcBRHIjWNRhI8tZgdZjKnDvmfDm5762W8eGIdp9lhTARzo4kSH9w4Rzuaxbr9tjO6XJuoRn0XaOpc346fvYMFqZGRSZIgFEVu8UtEfWPY9fsFCDX5zfqtmkq3AgtIL08y2-ShwTMdKwpk5nU\",\"p\":\"_HJ0vWwVhw4ONIuVnecV9wf0q8JLajbMUha0WiPfiWdSmiwgItQ8EWQHgSxtpVY6ZicOMdhrnLSv0JsYcwl4g-ep4VsC85p4t_TdpAeh1r6h9HVV1_JXlQHPQwpAAwvau4jAp8l_ywL5MkUO-U0Sor8AyNouzakEVQsfYy7KVwaVado47TV_I0f_4rmFlG1giJ5Ct0-iAw5qOPiCVwlQMIJVmNBEdrfdZERYLIO-O_Jz8J3pJD4oHZ5RQfcs43Y41bJyKboOobLaFhlfBhFO3hXK05E5z9U7FBcVn4Aq7EQP1S3qKe1Mf8XMK2KKMXlquXokzpiXnDhOkJtcYvzhjQ\",\"q\":\"0DPvuak5mH4jfHOY50zUgzkTVkgdvkenlSfWbgDBrOAIolbAc_-6U4WN-4NTLzICqBterhuoZdMSJLXycMPYhgy3TkshIOOZHQzHmvqamP1bvb-EH-tnWbl8AKdk8v6aB2imQ9DrgL3530-7c-JwkbAOrjgYAYJD7ds9Hc2Vqe7iLJfhuQlMvuen2v5L1tJ8OmZ3s5UH1u6rhs9RPgyYrINJSOhInzPyG_iwzvl5SvIxvWWlBA5toHgiEN2X8Kxm2VZbjqtHLAJBctd3-rCymX-fIdJbFzJWrW1vDMZykr7I9LwqJ5SEFomIJhPMYVXwG85pyaq44D4nVqjAE596iQ\",\"qi\":\"ab21TQb0qSah2PLjZJS_JShZj6biZUIcHcjd81ucJmpO-8P2OJrxTB8_4Dv30wOzEuyiekAPDVoRJbgZtbRfiySjKCQ4WyEwgjbNynnQMx2g3zz1_nUvuz5Cq659poQZAk7GbPqri_-ZgSc25f23jtTJTDd7vi5BPvOHidIzW0FSRpLLsvY0zAIHguf5RIW-G-nyzmF9_InzrWgFge-NGAywphM-d3HNJbE7Uz-CV84fvXPAwvWtL2L1MsdQdFJUe7Q8_IYaQ208PsvG5y7bwI61hwTeqlAceiBLWfepzmcAB9Smat6nXpf6945A5ZaGjMrWq8aMq21pUuloqX1a_g\"}"
    |> JOSE.JWK.from_binary
  end,
  serializer: Identificator.GuardianSerializer
